{% extends "base.html" %}

{% block contenido %}
    <div class="lista-contenedor">

        <div class="contenido-principal">
            <h1 class="page-title"><i></i> Lista de empleados</h1>
            <a href="{% url 'crear-empleado' %}" class="boton-crear">Crear empleado</a>
            <ul class="lista">
                {% for empleado in lista_empleados %}
                    <li class="item-lista"
                        data-id="{{ empleado.id }}"
                        data-nombre="{{ empleado.nombre }}"
                        data-departamento="{{ empleado.departamento|default_if_none:'' }}"
                        data-disponibilidad="{{ empleado.disponibilidad|default_if_none:'' }}"
                        data-direccion="{{ empleado.direccion|default_if_none:'' }}"
                        data-telefono="{{ empleado.telefono|default_if_none:'' }}"
                    >
                        <a href="#" class="detalle-empleado">
                            <span class="empleado-nombre">{{ empleado.nombre }}</span>
                            {% if empleado.departamento %}
                                <span class="empleado-departamento">{{ empleado.departamento }}</span>
                            {% endif %}
                        </a>
                    </li>
                {% endfor %}
            </ul>

            <!-- Detalle de empleado din√°mico -->
            <div id="detalles-empleado" style="display:none; margin-top: 1em; border: 1px solid #ccc; padding: 1em;">
                <h3 id="detalle-nombre"></h3>
                <p><strong>Departamento:</strong> <span id="detalle-departamento"></span></p>
                <p><strong>Disponibilidad:</strong> <span id="detalle-disponibilidad"></span></p>
                <p><strong>Direcci√≥n:</strong> <span id="detalle-direccion"></span></p>
                <p><strong>Tel√©fono:</strong> <span id="detalle-telefono"></span></p>
            </div>
        </div>

        <div class="funcionalidad-extra">
            <h2>Empleados no disponibles</h2>
            <ul class="lista">
                {% for empleado in lista_empleados %}
                    {% if empleado.disponibilidad == "vacaciones" or empleado.disponibilidad == "baja m√©dica" or empleado.disponibilidad == "viaje" %}
                        <li class="item-lista">
                            <a href="{% url 'detalle_empleado' empleado.pk %}">
                                {% if empleado.disponibilidad == "vacaciones" %}
                                    üå¥
                                {% elif empleado.disponibilidad == "baja m√©dica" %}
                                    üë®‚Äç‚öïÔ∏è
                                {% elif empleado.disponibilidad == "viaje" %}
                                    ‚úàÔ∏è
                                {% endif %}
                                {{ empleado.nombre }} ({{ empleado.disponibilidad }})
                            </a>
                        </li>
                    {% endif %}
                {% empty %}
                    <li>Todos los empleados est√°n disponibles</li>
                {% endfor %}
            </ul>
        </div>

    </div>
{% endblock %}

{% block listado_lateral %}
<div class="lista-contenedor">
    <div class="seccion-lateral">
        <h3>√öltimos empleados</h3>
        <ul class="lista">
            {% for empleado in ultimos_empleados %}
                <li class="list-item">
                    <a href="{% url 'detalle_empleado' empleado.pk %}">
                        {{ empleado.nombre }}
                        {% if empleado.puesto %}
                            <small>{{ empleado.puesto }}</small>
                        {% endif %}
                    </a>
                </li>
            {% empty %}
                <li class="mensaje-vacio">No hay empleados recientes</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}

